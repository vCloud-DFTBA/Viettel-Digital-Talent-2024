vinh@vinhbh:~/Documents/VDT2024/mid-term/vdt-ansible/vdt-automation$ ansible-playbook playbooks/ansible.yml --ask-become-pass --ask-vault-pass
BECOME password: 
Vault password: 

PLAY [all] *******************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.136]
ok: [192.168.144.129]
ok: [192.168.144.135]
ok: [192.168.144.133]
ok: [192.168.144.132]

TASK [update repository index (Ubuntu)] **************************************************************************************************************************************************
changed: [192.168.144.129]
changed: [192.168.144.136]
changed: [192.168.144.135]
changed: [192.168.144.133]
changed: [192.168.144.132]

PLAY [all] *******************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.135]
ok: [192.168.144.136]
ok: [192.168.144.129]
ok: [192.168.144.133]
ok: [192.168.144.132]

TASK [../roles/common : Install dependencies] ********************************************************************************************************************************************
ok: [192.168.144.136]
ok: [192.168.144.129]
ok: [192.168.144.135]
ok: [192.168.144.133]
ok: [192.168.144.132]

TASK [../roles/common : Add Docker GPG key] **********************************************************************************************************************************************
ok: [192.168.144.135]
ok: [192.168.144.133]
ok: [192.168.144.129]
ok: [192.168.144.136]
ok: [192.168.144.132]

TASK [../roles/common : Add Docker repository] *******************************************************************************************************************************************
ok: [192.168.144.136]
ok: [192.168.144.135]
ok: [192.168.144.133]
ok: [192.168.144.129]
ok: [192.168.144.132]

TASK [../roles/common : Install Docker] **************************************************************************************************************************************************
ok: [192.168.144.135]
ok: [192.168.144.136]
ok: [192.168.144.129]
ok: [192.168.144.133]
ok: [192.168.144.132]

TASK [../roles/common : Start Docker service] ********************************************************************************************************************************************
ok: [192.168.144.136]
ok: [192.168.144.135]
ok: [192.168.144.129]
ok: [192.168.144.133]
ok: [192.168.144.132]

TASK [../roles/common : Check the docker version] ****************************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]
changed: [192.168.144.132]
changed: [192.168.144.133]
changed: [192.168.144.129]

TASK [../roles/common : Install Python 3 and pip] ****************************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]
changed: [192.168.144.133]
changed: [192.168.144.132]
changed: [192.168.144.129]

TASK [../roles/common : Install Docker Compose dependencies] *****************************************************************************************************************************
ok: [192.168.144.135]
ok: [192.168.144.133]
ok: [192.168.144.136]
ok: [192.168.144.129]
ok: [192.168.144.132]

PLAY [vdt_db] ****************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.129]

TASK [../roles/vdt_db : Check if docker-compose.yml exists] ******************************************************************************************************************************
ok: [192.168.144.129]

TASK [../roles/vdt_db : Run Docker Compose down] *****************************************************************************************************************************************
changed: [192.168.144.129]

TASK [../roles/vdt_db : Remove directory] ************************************************************************************************************************************************
changed: [192.168.144.129]

TASK [../roles/vdt_db : Create directory vdt-db] *****************************************************************************************************************************************
changed: [192.168.144.129]

TASK [../roles/vdt_db : Render Docker Compose template] **********************************************************************************************************************************
changed: [192.168.144.129]

TASK [../roles/vdt_db : Run Docker Compose up] *******************************************************************************************************************************************
changed: [192.168.144.129]

PLAY [vdt_web] ***************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.136]
ok: [192.168.144.135]

TASK [../roles/vdt_web : Check if docker-compose.yml exists] *****************************************************************************************************************************
ok: [192.168.144.135]
ok: [192.168.144.136]

TASK [../roles/vdt_web : Run Docker Compose down] ****************************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]

TASK [../roles/vdt_web : Remove directory vdt] *******************************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]

TASK [../roles/vdt_web : Create directory vdt] *******************************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]

TASK [../roles/vdt_web : Render Docker Compose template] *********************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]

TASK [../roles/vdt_web : Run Docker Compose up] ******************************************************************************************************************************************
changed: [192.168.144.135]
changed: [192.168.144.136]

PLAY [vdt_api] ***************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.132]

TASK [../roles/vdt_api : Check if docker-compose.yml exists] *****************************************************************************************************************************
ok: [192.168.144.132]

TASK [../roles/vdt_api : Run Docker Compose Down] ****************************************************************************************************************************************
changed: [192.168.144.132]

TASK [../roles/vdt_api : Remove directory vdt] *******************************************************************************************************************************************
changed: [192.168.144.132]

TASK [../roles/vdt_api : Create directory vdt-api] ***************************************************************************************************************************************
changed: [192.168.144.132]

TASK [../roles/vdt_api : Render Docker Compose template] *********************************************************************************************************************************
changed: [192.168.144.132]

TASK [../roles/vdt_api : Run Docker Compose Up] ******************************************************************************************************************************************
changed: [192.168.144.132]

PLAY [vdt_api] ***************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.133]

TASK [../roles/vdt_api : Check if docker-compose.yml exists] *****************************************************************************************************************************
ok: [192.168.144.133]

TASK [../roles/vdt_api : Run Docker Compose Down] ****************************************************************************************************************************************
changed: [192.168.144.133]

TASK [../roles/vdt_api : Remove directory vdt] *******************************************************************************************************************************************
changed: [192.168.144.133]

TASK [../roles/vdt_api : Create directory vdt-api] ***************************************************************************************************************************************
changed: [192.168.144.133]

TASK [../roles/vdt_api : Render Docker Compose template] *********************************************************************************************************************************
changed: [192.168.144.133]

TASK [../roles/vdt_api : Run Docker Compose Up] ******************************************************************************************************************************************
changed: [192.168.144.133]

PLAY [vdt_lb] ****************************************************************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************************************************************
ok: [192.168.144.135]

TASK [../roles/vdt_lb : Install HAProxy] *************************************************************************************************************************************************
ok: [192.168.144.135]

TASK [../roles/vdt_lb : Copy HAProxy configuration file] *********************************************************************************************************************************
changed: [192.168.144.135]

TASK [../roles/vdt_lb : Ensure HAProxy service is enabled and started] *******************************************************************************************************************
ok: [192.168.144.135]

RUNNING HANDLER [../roles/vdt_lb : restart haproxy] **************************************************************************************************************************************
changed: [192.168.144.135]

PLAY RECAP *******************************************************************************************************************************************************************************
192.168.144.129            : ok=18   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
192.168.144.132            : ok=18   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
192.168.144.133            : ok=18   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
192.168.144.135            : ok=23   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
192.168.144.136            : ok=18   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0 